(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(2),s=n(15),c=n.n(s),a=n(3),u=function(e){var t=e.person,n=e.toggleDelete;return Object(o.jsxs)("li",{children:[t.name," ",t.number," ",Object(o.jsx)("button",{onClick:n,children:"delete"})]})},l=n(4),i=n.n(l),j="api/persons",d=function(){return i.a.get(j).then((function(e){return e.data}))},b=function(e){return i.a.post(j,e).then((function(e){return e.data}))},f=function(e){return i.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},h=function(e,t){return i.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},g=function(e){var t=e.persons,n=e.newFilter,r=e.showAll,s=e.setPersons,c=e.setErrorMessage,a=r?t:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Number"}),Object(o.jsx)("ul",{children:a.map((function(e){return Object(o.jsx)(u,{person:e,toggleDelete:function(){return function(e,t,n,o,r){window.confirm("Do you really want to delete ".concat(t,"?"))&&(n=n.filter((function(t){return t.id!==e})),f(e).then((function(){o(n),console.log(n)})).catch((function(e){r("Person '".concat(t,"' was already removed from server")),setTimeout((function(){r(null)}),5e3),o(n)})))}(e.id,e.name,t,s,c)}},e.id)}))})]})},m=function(e){var t=e.newFilter,n=e.setNewFilter,r=e.setShowAll;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Phonebook"}),Object(o.jsx)("form",{children:Object(o.jsxs)("div",{children:["filter shown with: ",Object(o.jsx)("input",{value:t,onChange:function(e){console.log(""===e.target.value),""===e.target.value?r(!0):r(!1),n(e.target.value)}})]})})]})},O=n(6),v=function(e){var t=e.persons,n=e.newName,r=e.newNumber,s=(e.logMessage,e.setPersons),c=e.setNewName,a=e.setNewNumber,u=e.setLogMessage,l=e.setErrorMessage;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"add a new"}),Object(o.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),console.log("test"),0!==t.filter((function(e){return e.name===n})).length){if(window.confirm("".concat(n," is already added to phonebook, replace the old number with a new one?"))){var o=t.find((function(e){return e.name===n})),i=Object(O.a)(Object(O.a)({},o),{},{number:r});h(o.id,i).then((function(e){console.log(e),s(t.map((function(t){return t.name!==n?t:e}))),c(""),a("")}))}}else{console.log("test");var j={name:n,number:r,id:t.length+1};b(j).then((function(e){u("Added ".concat(n)),setTimeout((function(){u(null)}),5e3),s(t.concat(j)),c(""),a("")})).catch((function(e){console.log(e.response.data.error),l(e.response.data.error),setTimeout((function(){l(null)}),5e3)}))}},children:[Object(o.jsxs)("div",{children:["name:",Object(o.jsx)("input",{value:n,onChange:function(e){console.log(e.target.value),c(e.target.value)}})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:r,onChange:function(e){console.log(e.target.value),a(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})]})},w=function(e){var t=e.logMessage;return null===t?null:Object(o.jsx)("div",{className:"message",children:t})},p=function(e){var t=e.message;return null===t?null:Object(o.jsx)("div",{className:"error",children:t})},x=(n(39),function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(""),u=Object(a.a)(c,2),l=u[0],i=u[1],j=Object(r.useState)(""),b=Object(a.a)(j,2),f=b[0],h=b[1],O=Object(r.useState)(""),x=Object(a.a)(O,2),N=x[0],M=x[1],S=Object(r.useState)(!0),k=Object(a.a)(S,2),y=k[0],C=k[1],E=Object(r.useState)(null),F=Object(a.a)(E,2),P=F[0],A=F[1],D=Object(r.useState)(null),L=Object(a.a)(D,2),T=L[0],J=L[1];return Object(r.useEffect)((function(){console.log("effect"),d().then((function(e){s(e)}))}),[]),Object(o.jsxs)("div",{children:[w({logMessage:P}),Object(o.jsx)(p,{message:T}),m({newFilter:N,setNewFilter:M,setShowAll:C}),v({persons:n,newName:l,newNumber:f,logMessage:P,setPersons:s,setNewName:i,setNewNumber:h,setLogMessage:A,setErrorMessage:J}),g({persons:n,newFilter:N,showAll:y,setPersons:s,setErrorMessage:J})]})});c.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.1397424c.chunk.js.map