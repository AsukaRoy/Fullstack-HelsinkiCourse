(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(2),c=n(15),s=n.n(c),a=n(3),u=function(e){var t=e.person,n=e.toggleDelete;return Object(o.jsxs)("li",{children:[t.name," ",t.number," ",Object(o.jsx)("button",{onClick:n,children:"delete"})]})},l=n(4),i=n.n(l),j="api/persons",b=function(){return i.a.get(j).then((function(e){return e.data}))},d=function(e){return i.a.post(j,e).then((function(e){return e.data}))},f=function(e){return i.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},h=function(e,t){return i.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},g=function(e){var t=e.persons,n=e.newFilter,r=e.showAll,c=e.setPersons,s=e.setErrorMessage,a=r?t:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Number"}),Object(o.jsx)("ul",{children:a.map((function(e){return Object(o.jsx)(u,{person:e,toggleDelete:function(){return function(e,t,n,o,r){window.confirm("Do you really want to delete ".concat(t,"?"))&&(n=n.filter((function(t){return t.id!==e})),f(e).then((function(){o(n),console.log(n)})).catch((function(e){r("Person '".concat(t,"' was already removed from server")),setTimeout((function(){r(null)}),5e3),o(n)})))}(e.id,e.name,t,c,s)}},e.id)}))})]})},m=function(e){var t=e.newFilter,n=e.setNewFilter,r=e.setShowAll;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Phonebook"}),Object(o.jsx)("form",{children:Object(o.jsxs)("div",{children:["filter shown with: ",Object(o.jsx)("input",{value:t,onChange:function(e){console.log(""===e.target.value),""===e.target.value?r(!0):r(!1),n(e.target.value)}})]})})]})},O=n(6),v=function(e){var t=e.persons,n=e.newName,r=e.newNumber,c=e.logMessage,s=e.setPersons,a=e.setNewName,u=e.setNewNumber,l=e.setLogMessage;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"add a new"}),Object(o.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),0!==t.filter((function(e){return e.name===n})).length){if(window.confirm("".concat(n," is already added to phonebook, replace the old number with a new one?"))){var o=t.find((function(e){return e.name===n})),i=Object(O.a)(Object(O.a)({},o),{},{number:r});h(o.id,i).then((function(e){console.log(e),s(t.map((function(t){return t.name!==n?t:e}))),a(""),u("")}))}}else{var j={name:n,number:r,id:t.length+1};console.log("logMessage"),console.log(j.name),l("Added ".concat(n)),console.log(c),setTimeout((function(){l(null)}),5e3),d(j).then((function(e){s(t.concat(j)),a(""),u("")}))}},children:[Object(o.jsxs)("div",{children:["name:",Object(o.jsx)("input",{value:n,onChange:function(e){console.log(e.target.value),a(e.target.value)}})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:r,onChange:function(e){console.log(e.target.value),u(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})]})},w=function(e){var t=e.logMessage;return null===t?null:Object(o.jsx)("div",{className:"message",children:t})},p=function(e){var t=e.message;return null===t?null:Object(o.jsx)("div",{className:"error",children:t})},x=(n(39),function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),u=Object(a.a)(s,2),l=u[0],i=u[1],j=Object(r.useState)(""),d=Object(a.a)(j,2),f=d[0],h=d[1],O=Object(r.useState)(""),x=Object(a.a)(O,2),N=x[0],S=x[1],M=Object(r.useState)(!0),k=Object(a.a)(M,2),y=k[0],C=k[1],F=Object(r.useState)(null),P=Object(a.a)(F,2),A=P[0],D=P[1],E=Object(r.useState)(null),L=Object(a.a)(E,2),J=L[0],T=L[1];return Object(r.useEffect)((function(){console.log("effect"),b().then((function(e){c(e)}))}),[]),Object(o.jsxs)("div",{children:[w({logMessage:A}),Object(o.jsx)(p,{message:J}),m({newFilter:N,setNewFilter:S,setShowAll:C}),v({persons:n,newName:l,newNumber:f,logMessage:A,setPersons:c,setNewName:i,setNewNumber:h,setLogMessage:D}),g({persons:n,newFilter:N,showAll:y,setPersons:c,setErrorMessage:T})]})});s.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.a9ad13e8.chunk.js.map